generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model adventures {
  pkadventure        Int                  @default(autoincrement()) @id
  title              String
  summary            String?
  created_on         DateTime?            @default(now())
  fk_user_adventure  Int
  users              users                @relation(fields: [fk_user_adventure], references: [pkuser])
  locations          locations?
  saved_adventures   saved_adventures[]
  visited_adventures visited_adventures[]
}

model blogs {
  pkblog       Int       @default(autoincrement()) @id
  title        String
  summary      String?
  created_on   DateTime? @default(now())
  fk_user_blog Int
  users        users     @relation(fields: [fk_user_blog], references: [pkuser])
}

model itineraries {
  pkitinerary Int       @default(autoincrement()) @id
  title       String
  summary     String?
  created_on  DateTime? @default(now())
}

model locations {
  pklocation            Int        @default(autoincrement()) @id
  lat                   Float?
  lng                   Float?
  fk_adventure_location Int        @unique
  adventures            adventures @relation(fields: [fk_adventure_location], references: [pkadventure])
}

model users {
  pkuser                                    Int                  @default(autoincrement()) @id
  email                                     String               @unique
  username                                  String               @unique
  password                                  String
  firstname                                 String?
  lastname                                  String?
  bio                                       String?
  created_on                                DateTime?            @default(now())
  adventures                                adventures[]
  blogs                                     blogs[]
  followers_followers_user_followedTousers  followers[]          @relation("followers_user_followedTousers")
  followers_followers_user_followingTousers followers[]          @relation("followers_user_followingTousers")
  saved_adventures                          saved_adventures[]
  visited_adventures                        visited_adventures[]
}

model followers {
  pkfollower                            Int       @default(autoincrement()) @id
  user_following                        Int
  user_followed                         Int
  created_on                            DateTime? @default(now())
  users_followers_user_followedTousers  users     @relation("followers_user_followedTousers", fields: [user_followed], references: [pkuser])
  users_followers_user_followingTousers users     @relation("followers_user_followingTousers", fields: [user_following], references: [pkuser])
}

model saved_adventures {
  pksaved_adventure Int        @default(autoincrement()) @id
  created_on        DateTime?  @default(now())
  saving_user       Int
  saving_adventure  Int
  adventures        adventures @relation(fields: [saving_adventure], references: [pkadventure])
  users             users      @relation(fields: [saving_user], references: [pkuser])
}

model visited_adventures {
  pkvisited_adventure Int        @default(autoincrement()) @id
  created_on          DateTime?  @default(now())
  visiting_user       Int
  visiting_adventure  Int
  adventures          adventures @relation(fields: [visiting_adventure], references: [pkadventure])
  users               users      @relation(fields: [visiting_user], references: [pkuser])
}
